---
related_endpoints:
  - post_metadata_queries_execute_read
category_id: metadata
subcategory_id: metadata/5-queries
is_index: false
id: metadata/queries/comparison
rank: 7
type: guide
total_steps: 7
sibling_id: metadata/queries
parent_id: metadata/queries
next_page_id: ''
previous_page_id: metadata/queries/indexes
source_url: >-
  https://github.com/box/developer.box.com/blob/default/content/guides/metadata/5-queries/7-comparison.md
---
# 通常の検索との比較

一見、[メタデータクエリAPI][mdq_api]は[コンテンツの検索API][search]とよく似ていますが、動作には重要な違いがいくつかあります。大まかに言うと、メタデータクエリAPIは正確さとスループットの向上のために最適化されているのに対し、通常の検索は、人間のユーザーとの関連性のために最適化されています。

## 詳細な比較

<!-- markdownlint-disable line-length -->

|             | [メタデータクエリAPI][mdq_api]                                                                                                                                                        | [検索API][search]                                                                                                                                                   |
| ----------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| インデックスの作成対象 | このAPIでは、検索対象のメタデータテンプレートの値に基づいてファイル/フォルダのみが返されます。                                                                                                                             | このAPIでは、項目名、説明、コンテンツ(最初の10,000バイトまで)の値のほか、関連付けられたメタデータテンプレートインスタンスに基づいてファイル、フォルダ、およびウェブリンクが返されます。                                                                 |
| インデックス作成時間  | このAPIでは、ファイルまたはフォルダのメタデータが追加、削除、更新されるとすぐに正確な結果が返されます。                                                                                                                         | このAPIは、検索インデックスの作成が遅延すると、その影響を受けます。この遅延は通常10分ですが、場合によっては長くなることがあります。つまり、メタデータが更新されてから10分を経過しても項目が返されない場合があります。                                                    |
| 一致          | このAPIでは、SQLの規則に基づいて完全一致が使用されます。結果は、指定した並べ替え順を基に返されます。                                                                                                                         | このAPIでは、あいまい一致が使用されるため、文字列のトークン化、特殊文字の削除、およびその他の検索コンセプトに基づいて異なる結果が返される場合があります。結果の順序は、項目の関連性または更新日に基づいています。                                                        |
| 条件付きロジック    | このAPIは、比較演算子を使用するマルチパートブール式をサポートします。                                                                                                                                          | このAPIによる条件のサポートは限定されています。サポートされるのは、単一のメタデータフィールドに対する条件のみで、メタデータに対するブール演算子はサポートされません。                                                                              |
| 応答タイプ       | このAPIでは、一致したファイル/フォルダと、クエリによって一致した関連するメタデータの両方が返されます。                                                                                                                         | このAPIで返されるのは、一致した項目のみです。各項目のメタデータを返すには、後続のAPI呼び出しが必要です。                                                                                                           |
| スループット      | このAPIには現在、ユーザーごとのレート制限のほか、会社あたりリクエスト数が10件/秒という制限があります。                                                                                                                        | このAPIでは、1ユーザーあたり検索数は6件/秒、会社あたりの検索数は最大60件/分および12件/秒がサポートされています。                                                                                                    |
| 規模          | このAPIには、指定したメタデータテンプレートを使用して返される項目数に制限はありません。ただし、10,000個を超えるテンプレートインスタンスを含むクエリには、適切な[インデックス](g://metadata/queries/indexes)を作成する必要があります。一致する結果が2,000件以下になるクエリのみを送信することをお勧めします。 | このAPIには、指定したメタデータテンプレートを使用して返される項目数に制限はありません。ただし、検索に一致する項目数が増えるにつれ、応答時間が大幅に増大します。このAPIでは、1つのクエリに対する結果は1,000万件までという制限があります。一致する結果が50,000件以下になるクエリのみを送信することをお勧めします。 |
| スコープ        | このAPIは常に、ユーザーがアクセスできるコンテンツに制限されています。                                                                                                                                          | このAPIは、ユーザーがアクセスできるコンテンツ(`​user_content​`)または社内のすべてのコンテンツ(`​enterprise_content​`)のいずれかに制限される場合があります。                                                              |

<!-- markdownlint-enable line-length -->

<Message warning>

一致する結果が10,000件を超える検索API呼び出しにより、関連性が多少変化することがあります。そのため、結果が重複する場合や結果が返されない場合があります。大規模なデータセットでは、検索を完全一致のソリューションと考えないでください。

</Message>

## シナリオ

使用するAPIを決定する際に役立つシナリオの例を以下に示します。

### 会社全体を対象にして用語を検索する

キーワード`Guarantee`に一致するコンテンツまたはメタデータを含むすべてのコンテンツを社内で検索します。

この場合は、[検索API][search]をお勧めします。このAPIでは、コンテンツとメタデータの両方で用語を照合し、対象範囲を会社全体のすべてのコンテンツに設定できます。

### 複数のメタデータ値を検索する

メタデータテンプレート`​Contract​`を使用して、金額が100,000ドルを超過し、更新日が2019年で、アカウント番号`​1234`に関連付けられていないすべてのドキュメントを検索します。

この場合は、[メタデータクエリAPI][mdq_api]をお勧めします。メタデータクエリを使用すると、数値、日付、文字列など、メタデータテンプレート内の複数のフィールドを評価するブール式を作成できます。

### メタデータ検索とコンテンツ検索を組み合わせる

メタデータテンプレート`​Contract​`を使用して、金額が100,000ドルを超過し、更新日が2019年で、タイトルや本文に「Sale」という用語が含まれておらず、アカウント番号`​1234`に関連付けられていないすべてのドキュメントを検索します。

このシナリオは、現在**サポートされていません**。現時点では、どちらのAPIも、あいまい検索(「Sale」の検索)と、メタデータフィールドに一致するブール式の組み合わせをサポートしていません。

[mdq_api]: e://post_metadata_queries_execute_read

[search]: e://get_search
